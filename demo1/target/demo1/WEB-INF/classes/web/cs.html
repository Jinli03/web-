<%@ page contentType="text/html;charset=UTF-8" language="java" isELIgnored="false"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>

<html>
<head>
    <title>系统管理员</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">

</head>
<body>
欢迎你${username}系统管理员
<script src="js/axios-0.18.0.js"></script>
<div id="list">
    <table id="cmlist" border="1" cellspacing="0" width="100%">
        <tr>
            <th>食堂管理员</th>
            <th>所属食堂</th>
        </tr>
        <tr v-for="cmuser in cmusers" align="centre">
            <td>{{cmuser.username}}</td>
            <td>{{cmuser.canteen}}</td>

        </tr>
    </table>
</div>
<script>
    axios.post("http://localhost:8080/demo1_war_exploded/LoginServlet","username=Jinli03").then(function(resp){
        alert(resp.data);
    })

</script>
<script>
    new Vue({
        el: "#list",
        data() {
            return {
                cmusers: []
            };
        },
        mounted() {
            var _this = this;
            axios.get("http://localhost:8080/demo1_war_exploded/LoginServlet")
                .then(function (resp) {
                    _this.cmusers = resp.data.cuserlist;
                })
                .catch(function (error) {
                    console.error("Error fetching cuserlist:", error);
                });
        }
    });
</script>



</body>
</html>
